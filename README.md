# 전처리

### 전철 승객수

수도권 전철의 승객 수 데이터를 사용하였다. 2019년 1월 1일부터 2021년 7월 31일까지의 일간 데이터를 사용하였다.

##### csv 파일 병합

지하철 승객 수 원본 csv 파일이 한달 간격으로 나뉘어있어서 2019년 01월에서 2021년 07월까지 31개 파일을 병합하였다.

##### 주말, 공휴일 데이터 제거

![영업일 제거 (1)](https://github.com/seosztt/Visualization_project/blob/master/image/%EC%98%81%EC%97%85%EC%9D%BC%20%EC%A0%9C%EA%B1%B0%20(1).png?raw=true)

- 2021년 6,7월 일간 지하철 승객 수 그래프를 그려보면 7일 간격으로 패턴이 있다. 주말의 승객 수가 평일보다 적기 때문이다. 공휴일도 주말과 같이 승객 수가 감소한다. 지하철 승객 수의 감소에 휴일이 미치는 영향을 제외하고 코로나가 미치는 영향을 보고 싶기 때문에 주말, 공휴일 데이터를 제거하고 영업일 데이터만 남기는 전처리 과정을 거쳤다.

  ![영업일 제거 (2)](https://github.com/seosztt/Visualization_project/blob/master/image/%EC%98%81%EC%97%85%EC%9D%BC%20%EC%A0%9C%EA%B1%B0%20(2).png?raw=true)

##### 월간 시간대별 승객 수

승객 수가 시간대별로 구분되어 있는 데이터는 원본데이터가 월간 합계 데이터이기 때문에 영업일만 따로 추출하는 전처리 과정을 거치지 못했다.

따라서 `휴일의 수에 따른 승객 수의 차이`와 `28일,30일, 31일로 월마다 날짜가 다르기 때문에 생기는 승객수 차이`도 그래프에 반영된다.

월 단위는 `휴일 수/전체 날짜`의 백분율 차이가 주 단위와는 다르게 대부분 한 자릿 수이므로 주 단위의 그래프를 그릴 때만큼 영업일을 따로 추출할 이유가 강하지는 않다.

### 코로나 확진자 수

서울 확진자 수와 전국 확진자수를 구분하였다.

### 거리두기 단계

거리두기 단계는 나무위키를 참고하여 직접 작성하였다.

### 기간 설정

짧은 기간부터 긴 기간까지 다양한 기간의 추이를 확인하기 위해 주간, 월간으로 데이터를 나누었다.

전철 승객 수는 영업일 데이터만 보기 때문에 주간, 월간 평균을 사용하였다.

코로나 확진자 수는 주간, 월간 합계를 사용하였다.

거리두기 단계는 보통 주 단위로 바뀌기 때문에, 주간 최댓값을 사용하였다.

# 시각화

### 월간 합계

##### 2019년 1월 ~ 2021년 7월

![월간 (1)](https://github.com/seosztt/Visualization_project/blob/master/image/%EC%9B%94%EA%B0%84%20(1).png?raw=true)

![월간 (2)](https://github.com/seosztt/Visualization_project/blob/master/image/%EC%9B%94%EA%B0%84%20(2).png?raw=true)

코로나 발생 1년 전부터 발생 이후 현재까지 두 변수의 큰 흐름을 파악하기 위해 그려보았다.

월간 전철 이용자 그래프를 보면 2020년 1월 우리나라 코로나 첫 확진자 발생 무렵에 40%가량 급락한다. 확진자 수는 전체적으로 우상향을 그리고 있지만, 중간에 급증했다가 감소하는 구간이 있다.

2020년 1월 이후엔 코로나에 대한 공포 심리가 무뎌지며 승객 수가 회복되다가 다시 확진자 급증 구간에 전철 승객 수가 약간씩 감소하는 패턴이 반복되고 있다. 그러나 확진자 수의 우상향 흐름과는 다르게 전철 승객 수가 우하향을 그리고 있지는 않다.



### 거리두기 단계가 바뀐 2개 년월 간 시간대별 비교

##### '2021년 6월'과 '2021년 7월'

2021년 7월 12일부터 18시 이후 3인이상 모임 금지가 시행되었다. 6월과 7월 시간대별로 지하철 승차인원에 차이가 있는지 파악하기 위해 그래프를 그렸다.

시간대별 하차인원이 아닌 승차인원을 파악한 이유는 시간에 따른 요인에 더 반응이 클 것이라 가정했기 때문이다. 18시 이후에 평소와 다른 무언가 시행된다면 18시부터 승차하는 인원에는 그 시행이 반영되겠지만, 18시에 하차하는 인원은 17시에 탑승했을 수도 있고 16시에 탑승했을 수도 있기 때문에 시행에 의한 변동이 넓은 시간대에 퍼져있을 것이라 가정했다.

![6월과 7월 주간](https://github.com/seosztt/Visualization_project/blob/master/image/6%EC%9B%94%EA%B3%BC%207%EC%9B%94%20%EC%A3%BC%EA%B0%84.png?raw=true)

![6월과 7월 (1)](https://github.com/seosztt/Visualization_project/blob/master/image/6%EC%9B%94%EA%B3%BC%207%EC%9B%94%20(1).png?raw=true)

- 6월에 비해 7월에 모든 시간대에서 승차인원이 감소하였다. 7월 들어서 확진자가 급증한 영향으로 전체 지하철 승객 수가 감소한 것으로 추정된다. 정확한 차이를 보기 위해 감소량  그래프를 그렸다.

  ![6월과 7월 (2)](https://github.com/seosztt/Visualization_project/blob/master/image/6%EC%9B%94%EA%B3%BC%207%EC%9B%94%20(2).png?raw=true)

- 감소량 그래프를 보니 그래프 모양이 승차인원 그래프와 비슷해보인다. 6월 승차인원과 7월 감소량 그래프를 같이 그렸다.

![6월과 7월 (3)](https://github.com/seosztt/Visualization_project/blob/master/image/6%EC%9B%94%EA%B3%BC%207%EC%9B%94%20(3).png?raw=true)

- 전체적으로 비슷하지만 22시에 도드라지게 차이가 있다. 6월과 비교해 7월에 전체적으로 감소했기 때문에 평소 승차량이 많은 시간대에 감소량이 많게 나오고 승차량이 적은 시간대에는 감소량도 적게 나왔다. 그러나 22시에는 평소 승차량이 출퇴근시간대에 비해 절반정도 임에도 감소량은 출퇴근 시간대와 비슷하여 감소에 평소승차량 외의 요인이 반영된 것 같다.
- 18시에는 감소량이 큰 편이긴 하지만, 18시에는 평소에도 승차량이 많은 시간이기 때문에 승차량이 많아서 많이 감소한 것인지 다른 요인에 의해 많이 감소한 것인지 알 수 없다.
- 18시보다는 12시 ~ 16시에 승차인원 감소가 평소 승차인원에 비해 많이 감소했다.

##### '2020년 11월'과 '2020년 12월'

2020년 11월 6일까지 사회적 거리두기는 세단계로 구분됐고 6일까지 1단계였다. 

2020년 11월 7일부터 사회적 거리두기는 다섯단계(`1`,`1.5`,`2`,`2.5`,`3`) 체계가 시행됐다.

`11월` 7일부터 18일까지는 1단계였다.

19일에 1.5단계격상되었으나, 인원 제한이 강화되었고 운영 시간 제한은 홍보관을 제외하고 없었다.

24일에 2단계로 격상되어 21시부터 노래연습장, 실내공연장, 실내체육시설 등의 운영이 중단되었다.

`12월` 8일에 2.5단계로 격상되어 21시 이후 영화관, 피씨방, 오락실,멀티방,학원,독서실,놀이공원,상점,마트,백화점 등의 시설이 운영중단되었고 지하철 운행이 감축되었다. 24일부터는 강화된 2.5단계가 시행되어 5인이상 모일 수 없게 되었고 21시 이후 식당 운영이 중단됐다.

![11월과 12월 주간](https://github.com/seosztt/Visualization_project/blob/master/image/11%EC%9B%94%EA%B3%BC%2012%EC%9B%94%20%EC%A3%BC%EA%B0%84.png?raw=true)

![11월과 12월 (1)](https://github.com/seosztt/Visualization_project/blob/master/image/11%EC%9B%94%EA%B3%BC%2012%EC%9B%94%20(1).png?raw=true)

- 모든 시간대에서 승차인원이 감소했다. 12월에 확진자가 급증하고 거리두기 단계도 강화했기 때문일 것이다.

  ![11월과 12월 (2)](https://github.com/seosztt/Visualization_project/blob/master/image/11%EC%9B%94%EA%B3%BC%2012%EC%9B%94%20(2).png?raw=true)

12월에 많은 시설이 21시 이후로 영업을 중단했고 21시 이후로 지하철 운행도 감축됐지만, 평소 승차인원에 비해 감소량이 큰 시간은 22시였다.

##### '2021년 1월'과 '2021년 2월'

2021년 1월 내내 거리두기 단계가 2.5단계로 유지되며 사람이 모이는 시설 대부분은 21시 이후 영엽을 중단해야 했다.

2월 15일부터 거리두기 단계가 2.5단계에서 2단계로 완화되며 수도권 영업시간 제한이 21시에서 22시로 완화되었다.

![1월과 2월 주간](https://github.com/seosztt/Visualization_project/blob/master/image/1%EC%9B%94%EA%B3%BC%202%EC%9B%94%20%EC%A3%BC%EA%B0%84.png?raw=true)

![1월과 2월](https://github.com/seosztt/Visualization_project/blob/master/image/1%EC%9B%94%EA%B3%BC%202%EC%9B%94.png?raw=true)

1월에 비해 02월에는 출퇴근 시간에는 승차인원이 줄었는데 낮시간에는 증가하였다. 그리고 22시에 승차 인원이 증가했다.

출퇴근 시간의 승차인원 감소는 2월에 설날이 있고 전체 일수가 28일이라 월 중 휴일의 비율이 높기 때문으로 추정된다.

그러나 낮시간과 22시의 승차인원 증가는 거리두기 완화 및 휴일 비율이 높기 때문으로 추정된다.

![1월과 2월 (2)](https://github.com/seosztt/Visualization_project/blob/master/image/1%EC%9B%94%EA%B3%BC%202%EC%9B%94%20(2).png?raw=true)

감소량 그래프를 보면 10시 ~ 16시 및 21시~23시에 음수를 가리키고 있다. 즉, 전월에 비해 승차량이 증가하였다. 특이 22시에는 증가량이 다른 시간대에 비해 뚜렷한데, 이는 식당 영업 허용시간 22시까지로 연장한 영향이 있는 것으로 추정된다.



### 주간 확진자 수 합계와 주간 전철이용자 수의 일 평균

##### '2020-01-01' ~ '2021-07-27'

![주간](https://github.com/seosztt/Visualization_project/blob/master/image/%EC%A3%BC%EA%B0%84.png?raw=true)

우리나라에서 코로나 첫 확진자가 발생한 후부터 현재까지 두 변수의 증감이 어떻게 되는지 파악하기 위해 그려보았다.

우리나에서 코로나 첫 확진자는 2020년 1월 20일에 발생하였다.

날짜의 범위는 우리나라 코로나 첫 확진자 발생월인 2020년 1월의 첫날 부터 주간 전철 승객 평균이 유효한 마지막 주인 2021년 7월 27일 까지다.

두 변수를 하나의 도표에 겹쳐 그렸기 때문에 월간 추이에서 보였던 흐름이 더 뚜렷하게 보인다. 2020년 2월 중순 최초로 대규모 집단 감염이 발생한 후에 전철 승객 수가 급감하였다가 주간 확진자수가 광복절 무렵까지 등락이 없는 동안 전철 승객 수는 회복되었다. 그러다 8월 중순 경 주간 확진자 수가 증가하면서 전철 승객 수는 감소하였고, 이후 주간 확진자 수가 감소하고 12월 초까지 큰 등락이 없는 동안 전철 승객 수는 회복하였다. 12월 확진자 급증 이후 같은 패턴을 반복하여 전철 승객 수는 감소하였다가 회복한다.

시간이 흐를수록 코로나에 대한 공포심리가 무뎌지며 주간 확진자 수가 증가세임에도 전철 이용자 수는 비슷한 범위에서 등락을 보인다.

이 기간 두 변수 간의 상관계수는 `-0.263`이다.

